"use strict";var fs=require("fs"),FileFIL={filterFileName:function(e,t){if(void 0!=e&&void 0!=e.length){return e=e.replace(/[\\/:*?"<>]/g,t||"")}return null}},chalk=require("chalk"),NodeDebug={logRed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.red(e),t)},cRed:function(e){return chalk.red(e)},logBlue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.blue(e),t)},cBlue:function(e){return chalk.blue(e)},logGreen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.green(e),t)},cGreen:function(e){return chalk.green(e)},logGray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.gray(e),t)},cGray:function(e){return chalk.gray(e)},logYellow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.yellow(e),t)},cYellow:function(e){return chalk.yellow(e)},logLableRed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgRed(e),t)},logLableYellow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgYellow(e),t)},logLableCyan:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgCyan(e),t)},logLableGreen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgGreen(e),t)},logLableWhite:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgWhite(e),t)}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},asyncToGenerator=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,o){return function r(n,i){try{var l=t[n](i),u=l.value}catch(e){return void o(e)}if(!l.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}},PNGJS=require("pngjs").PNG,fs$1=require("fs"),stream=require("stream"),streamToBuffer=require("stream-to-buffer"),NodeImage={getPngData:function(){var e=asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,o){if(stream.PassThrough){var r=new stream.PassThrough;r.end(t),r.pipe(new PNGJS({filterType:4})).on("parsed",function(){e(this.data)})}else new PNGJS({filterType:4}).parse(t,function(t,r){t&&o("err pngParseAsync:",t),e(r.data)})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ARGB_BufferToPngFileBuffer:function(e,t,o){return new Promise(function(r,n){for(var i=e.length,l=t||4,u=0;u<i;u+=l){var f=e[u];e[u]=e[u+1],e[u+1]=e[u+2],e[u+2]=e[u+3],e[u+3]=f}var c=new PNGJS({width:o.w,height:o.h});c.data=e,streamToBuffer(c.pack(),function(e,t){e&&n(e),r(t)})})}},nodeCrypto=require("crypto"),NodeTool={getMD5:function(e){var t=nodeCrypto.createHash("md5");return t.update(e),t.digest("hex")},getSHA256:function(e){var t=nodeCrypto.createHash("sha256");return t.update(e),t.digest("hex")},arrayBuffertoBuffer:function(e){for(var t=new Buffer(e.byteLength),o=new Uint8Array(e),r=0;r<t.length;++r)t[r]=o[r];return t}},ConsoleCON={CSS_POST:"background: rgb(44, 132, 226);border-radius: 2px 25px 25px 2px;padding: 2px 8px;color: rgba(255, 255, 255, 1);display: inline-block;min-width: 100px;",CSS_POST_RESULT:"background: rgb(51, 197, 138);border-radius: 25px 2px 2px 25px;padding: 2px 8px;color: rgba(255, 255, 255, 1);display: inline-block;min-width: 100px;"},ObjectOBJ={isEmptyObject:function(e){for(var t in e)return!1;return!0},objectCopyToObject:function(e,t,o,r,n,i){if(void 0!=t)for(var l in e){void 0!=i&&i(e,t,l);void 0!=o&&o(l,e[l]);var u=l;void 0!=r&&(u=r(l,e[l])),void 0!=e[l]&&e[l].constructor===Object?("object"!==_typeof(t[u])&&(t[u]={}),this.objectCopyToObject(e[l],t[u],o,r,n)):t[u]=void 0!=n?n(l,e[l]):e[l]}},getObjectValueByNames:function(e,t,o){for(var r,n=0;n<t.length-(o||0);n++)if(0==n){if(void 0==e[t[n]])return null;r=e[t[n]]}else{if(void 0==r[t[n]])return null;r=r[t[n]]}return r},setObjectValueByNames:function(e,t,o){var r;if(1!=t.length){for(var n=0;n<t.length;n++)if(0==n&&t.length>2)void 0==e[t[0]]&&(e[t[0]]={}),r=e[t[0]];else if(n<t.length-2&&t.length>2)void 0==r[t[n]]&&(r[t[n]]={}),r=r[t[n]];else if(n==t.length-2)return 2==t.length?(void 0==e[t[0]]&&(e[t[0]]={}),void((r=e[t[0]])[t[1]]=o)):(void 0==r[t[n]]&&(r[t[n]]={}),void((r=r[t[n]])[t[n+1]]=o))}else e[t[0]]=o}},StringSTR={left:function(e,t){return t>=0?e.substr(0,t):this.right(e,-t)},right:function(e,t){return t>=0?e.substr(e.length-t,t):this.left(e,-t)},insert:function(e,t,o,r){return e.slice(0,t)+r+e.slice(t+Math.abs(o))}},Rect={rltb2xywh:function(e){var t={x:null,y:null,w:null,h:null};return t.x=e.left,t.y=e.top,t.h=e.bottom-e.top,t.w=e.right-e.left,t},xywh2rltb:function(e){var t={left:null,right:null,top:null,bottom:null};return t.left=e.x,t.top=e.y,t.right=e.x+e.w,t.bottom=e.y+e.h,t},paddingXywh:function(e,t){var o=Rect.xywh2rltb(e);return t.length&&4==t.length?(o.left-=t[0],o.top-=t[1],o.right+=t[2],o.bottom+=t[3],Rect.rltb2xywh(o)):(o.left-=t,o.top-=t,o.right+=t,o.bottom+=t,Rect.rltb2xywh(o))},getXywhsRange:function(e){for(var t={left:null,right:null,top:null,bottom:null},o=0;o<e.length;o++){var r=Rect.xywh2rltb(e[o]);void 0==t.left&&(t.left=r.left),void 0==t.top&&(t.top=r.top),void 0==t.right&&(t.right=r.right),void 0==t.bottom&&(t.bottom=r.bottom),r.left<t.left&&(t.left=r.left),r.top<t.top&&(t.top=r.top),r.right>t.right&&(t.right=r.right),r.bottom>t.bottom&&(t.bottom=r.bottom)}return Rect.rltb2xywh(t)},moveXywhs:function(e,t){for(var o=Rect.getXywhsRange(e),r=0;r<e.length;r++){var n=e[r];n.x=t.x+n.x-o.x,n.y=t.y+n.y-o.y}return e},xywhHasCover:function(e,t){var o=Rect.xywh2rltb(e),r=Rect.xywh2rltb(t);return!!(o.left<=r.right&&o.right>=r.left&&o.top<=r.bottom&&o.bottom>=r.top)}},TypeTYP={getType:function(e){var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"};return null===e?"null":void 0===e?"undefined":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?t[t.toString.call(e)]||"object":void 0===e?"undefined":_typeof(e)}},AarryArr={symDifference:function(e,t){for(var o={},r=0;r<e.length;r++)o[e[r]]=!0;for(r=0;r<t.length;r++)void 0==o[t[r]]?o[t[r]]=!0:o[t[r]]=!1;var n=[];for(var i in o)0!=o[i]&&n.push(i);return n},symDifference_ObjectArray:function(e,t,o){for(var r={},n=0;n<e.length;n++)r[e[n][o]]={is:!0,ob:e[n]};for(n=0;n<t.length;n++)void 0==r[t[n][o]]?r[t[n][o]]={is:!0,ob:t[n]}:r[t[n][o]]={is:!1};var i=[];for(var l in r)0!=r[l].is&&i.push(r[l].ob);return i},difference:function(e,t){for(var o={},r=0;r<e.length;r++)o[e[r]]=!0;for(r=0;r<t.length;r++)void 0!=o[t[r]]&&(o[t[r]]=!1);var n=[];for(var i in o)0!=o[i]&&n.push(i);return n},union:function(e,t){for(var o={},r=0;r<e.length;r++)o[e[r]]=!0;for(r=0;r<t.length;r++)void 0==o[t[r]]&&(o[t[r]]=!0);var n=[];for(var i in o)0!=o[i]&&n.push(i);return n},intersection:function(e,t){for(var o={},r=0;r<e.length;r++)o[e[r]]=!1;for(r=0;r<t.length;r++)void 0!=o[t[r]]&&(o[t[r]]=!0);var n=[];for(var i in o)0!=o[i]&&n.push(i);return n},remove:function(e,t,o){if(o);else e=e.slice(0,e.length);for(var r=0;r<e.length;r++)t.constructor==Function?t(e[r])&&(e.splice(r,1),r--):e[r]==t&&(e.splice(r,1),r--);return e},hasMember:function(e,t,o){if(void 0==o){for(var r=0;r<e.length;r++)if(e[r]==t)return!0;return!1}for(r=0;r<e.length;r++)if(o(e[r],t))return!0;return!1},getByKey:function(e,t,o,r){for(var n=0;n<e.length;n++)if(void 0!=e[n][t])if(void 0!=r){if(r(e[n][t],o))return e[n]}else if(e[n][t]==o)return e[n]},deleteByKey:function(e,t,o,r){for(var n=0;n<e.length;n++)void 0!=e[n][t]&&(void 0!=r?r(e[n][t],o)&&e.splice(n,1):e[n][t]==o&&e.splice(n,1))},sortObjectArray:function(e,t,o){if(void 0!=e&&void 0!=e.sort)return e.sort((r=t,function(e,t){var n,i;if("object"===(void 0===e?"undefined":_typeof(e))&&"object"===(void 0===t?"undefined":_typeof(t))&&e&&t)return n=e[r],i=t[r],n===i?0:(void 0===n?"undefined":_typeof(n))===(void 0===i?"undefined":_typeof(i))?o?n>i?-1:1:n<i?-1:1:(void 0===n?"undefined":_typeof(n))<(void 0===i?"undefined":_typeof(i))?-1:1;throw"error"}));var r}},getUUIDv4=require("uuid/v4"),Tool={genUUID_v4:function(){return getUUIDv4()}};console.log();var RichangNode={Object:ObjectOBJ,String:StringSTR,Type:TypeTYP,Array:AarryArr,Rect:Rect,Console:ConsoleCON,Tool:Tool,NodeFile:FileFIL,NodeDebug:NodeDebug,NodeTool:NodeTool,NodeImage:NodeImage};module.exports=RichangNode;
