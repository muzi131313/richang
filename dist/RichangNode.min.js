"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});for(var crypto=_interopDefault(require("crypto")),moment=require("moment"),Time={genTimestamp:function(e){var t=(new Date).getTime();return e?t:t.toString(36).toUpperCase()},parseTimestamp:function(e){return Number.isInteger(+e)?new Date(+e):new Date(parseInt(e,36))}},rng=function(){return crypto.randomBytes(16)},byteToHex=[],i=0;i<256;++i)byteToHex[i]=(i+256).toString(16).substr(1);function bytesToUuid(e,t){var r=t||0,n=byteToHex;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}var bytesToUuid_1=bytesToUuid;function v4(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||rng)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[n+i]=o[i];return t||bytesToUuid_1(o)}var v4_1=v4;function uuidToBytes(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,function(e){t.push(parseInt(e,16))}),t}function stringToBytes(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}var v35=function(e,t,r){var n=function(e,n,o,i){var a=o&&i||0;if("string"==typeof e&&(e=stringToBytes(e)),"string"==typeof n&&(n=uuidToBytes(n)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var l=r(n.concat(e));if(l[6]=15&l[6]|t,l[8]=63&l[8]|128,o)for(var f=0;f<16;++f)o[a+f]=l[f];return o||bytesToUuid_1(l)};return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function sha1(e){return"function"==typeof Buffer.from?Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")):Array.isArray(e)?e=new Buffer(e):"string"==typeof e&&(e=new Buffer(e,"utf8")),crypto.createHash("sha1").update(e).digest()}var sha1_1=sha1,v5=v35("v5",80,sha1_1),v1Regex=/^[0-9a-f]{8}-[0-9a-f]{4}-[1][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,v2Regex=/^[0-9a-f]{8}-[0-9a-f]{4}-[2][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,v3Regex=/^[0-9a-f]{8}-[0-9a-f]{4}-[3][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,v4Regex=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,v5Regex=/^[0-9a-f]{8}-[0-9a-f]{4}-[5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,nilRegex=/^[0]{8}-[0]{4}-[0]{4}-[0]{4}-[0]{12}$/i,anyRegex=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function v1(e){return v1Regex.test(e)}function v2(e){return v2Regex.test(e)}function v3(e){return v3Regex.test(e)}function v4$1(e){return v4Regex.test(e)}function v5$1(e){return v5Regex.test(e)}function nil(e){return nilRegex.test(e)}function anyNonNil(e){return anyRegex.test(e)}var isUuid={v1:v1,v2:v2,v3:v3,v4:v4$1,v5:v5$1,nil:nil,anyNonNil:anyNonNil};function f(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function ROTL(e,t){return e<<t|e>>>32-t}function sha1$1(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=new Array(n.length);for(var o=0;o<n.length;o++)e[o]=n.charCodeAt(o)}e.push(128);var i=e.length/4+2,a=Math.ceil(i/16),l=new Array(a);for(o=0;o<a;o++){l[o]=new Array(16);for(var u=0;u<16;u++)l[o][u]=e[64*o+4*u]<<24|e[64*o+4*u+1]<<16|e[64*o+4*u+2]<<8|e[64*o+4*u+3]}l[a-1][14]=8*(e.length-1)/Math.pow(2,32),l[a-1][14]=Math.floor(l[a-1][14]),l[a-1][15]=8*(e.length-1)&4294967295;for(o=0;o<a;o++){for(var s=new Array(80),c=0;c<16;c++)s[c]=l[o][c];for(c=16;c<80;c++)s[c]=ROTL(s[c-3]^s[c-8]^s[c-14]^s[c-16],1);var p=r[0],d=r[1],h=r[2],y=r[3],v=r[4];for(c=0;c<80;c++){var g=Math.floor(c/20),b=ROTL(p,5)+f(g,d,h,y)+v+t[g]+s[c]>>>0;v=y,y=h,h=ROTL(d,30)>>>0,d=p,p=b}r[0]=r[0]+p>>>0,r[1]=r[1]+d>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}var sha1Browser=sha1$1,Tool={genUUID_v4:function(){return v4_1()},genUUID_v5:function(e){if(36!==(t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"f8061fba-842b-4cc5-9872-9348e2e06916").length)var t=v5(t,"f8061fba-842b-4cc5-9872-9348e2e06916");return v5(e,t)},genSHA1:function(e){return t=sha1Browser(e),Array.from(t,function(e){return("0"+(255&e).toString(16)).slice(-2)}).join("");var t},formatUUID:function(e){var t="";return t+=(e=e.toLowerCase()).slice(0,8)+"-",t+=e.slice(8,12)+"-",t+=e.slice(12,16)+"-",t+=e.slice(16,20)+"-",t+=e.slice(20,36)},checkUUID:function(e){for(var t=[isUuid.v4,isUuid.v5,isUuid.v3,isUuid.v2,isUuid.v1],r=[4,5,3,2,1],n=0;n<t.length;n++)if(t[n](e))return r[n];return 0},roll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*(e-t+1)+t)},rollString:function(e,t){for(var r="",n=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)r+=n.charAt(Math.floor(Math.random()*n.length));return r}},fs=require("fs"),path=require("path"),fsex=require("fs-extra"),os=require("os"),moment$1=require("moment"),NodeFile={getTempDirManager:function(e){var t=os.tmpdir(),r=path.join(t,e);fsex.ensureDirSync(r);var n=Time.genTimestamp(),o=path.join(r,n);return fsex.ensureDirSync(o),{tempDir:o,mianTempDir:r,timestamp:n,destroy:function(){fsex.removeSync(this.tempDir)},clear:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date,r=fs.readdirSync(this.mianTempDir),o=0;o<r.length;o++){var i=r[o];if(i!=n){var a=path.join(this.mianTempDir,i),l=fs.statSync(a);moment$1(t).diff(l.mtime,"days")>=e&&fsex.remove(a)}}},genTempFilePath:function(e){var t=this;return function r(){var n=Tool.rollString(12);if(e)var o=path.join(t.tempDir,e,n);else o=path.join(t.tempDir,n);return fsex.pathExistsSync(o)?r():o}()}}}},chalk=require("chalk"),NodeDebug={logRed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.red(e),t)},cRed:function(e){return chalk.red(e)},logBlue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.blue(e),t)},cBlue:function(e){return chalk.blue(e)},logGreen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.green(e),t)},cGreen:function(e){return chalk.green(e)},logGray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.gray(e),t)},cGray:function(e){return chalk.gray(e)},logYellow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.yellow(e),t)},cYellow:function(e){return chalk.yellow(e)},logLableRed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgRed(e),t)},logLableYellow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgYellow(e),t)},logLableCyan:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgCyan(e),t)},logLableGreen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgGreen(e),t)},logLableWhite:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgWhite(e),t)}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},asyncToGenerator=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,i){try{var a=t[o](i),l=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},PNGJS=require("pngjs").PNG,fs$1=require("fs"),stream=require("stream"),streamToBuffer=require("stream-to-buffer"),NodeImage={getPngData:function(){var e=asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){if(stream.PassThrough){var n=new stream.PassThrough;n.end(t),n.pipe(new PNGJS({filterType:4})).on("parsed",function(){e(this.data)})}else new PNGJS({filterType:4}).parse(t,function(t,n){t&&r("err pngParseAsync:",t),e(n.data)})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ARGB_BufferToPngFileBuffer:function(e,t,r){return new Promise(function(n,o){for(var i=e.length,a=t||4,l=0;l<i;l+=a){var f=e[l];e[l]=e[l+1],e[l+1]=e[l+2],e[l+2]=e[l+3],e[l+3]=f}var u=new PNGJS({width:r.w,height:r.h});u.data=e,streamToBuffer(u.pack(),function(e,t){e&&o(e),n(t)})})}},nodeCrypto=require("crypto"),NodeTool={getMD5:function(e){var t=nodeCrypto.createHash("md5");return t.update(e),t.digest("hex")},getSHA256:function(e){var t=nodeCrypto.createHash("sha256");return t.update(e),t.digest("hex")},arrayBuffertoBuffer:function(e){for(var t=new Buffer(e.byteLength),r=new Uint8Array(e),n=0;n<t.length;++n)t[n]=r[n];return t}},ConsoleCON={CSS_POST:"background: rgb(44, 132, 226);border-radius: 2px 25px 25px 2px;padding: 2px 8px;color: rgba(255, 255, 255, 1);display: inline-block;min-width: 100px;",CSS_POST_RESULT:"background: rgb(51, 197, 138);border-radius: 25px 2px 2px 25px;padding: 2px 8px;color: rgba(255, 255, 255, 1);display: inline-block;min-width: 100px;"},ObjectOBJ={isEmptyObject:function(e){for(var t in e)return!1;return!0},objectCopyToObject:function(e,t,r,n,o,i){if(void 0!=t)for(var a in e){void 0!=i&&i(e,t,a);void 0!=r&&r(a,e[a]);var l=a;void 0!=n&&(l=n(a,e[a])),void 0!=e[a]&&e[a].constructor===Object?("object"!==_typeof(t[l])&&(t[l]={}),this.objectCopyToObject(e[a],t[l],r,n,o)):t[l]=void 0!=o?o(a,e[a]):e[a]}},getObjectValueByNames:function(e,t,r){for(var n,o=0;o<t.length-(r||0);o++)if(0==o){if(void 0==(i=e[t[o]]))return;n=i}else{var i;if(void 0==(i=n[t[o]]))return;n=i}return n},setObjectValueByNames:function(e,t,r){var n=t.length;if(1!=n)for(var o=e,i=null,a=0;a<n;a++){if(i=t[a],a==n-1)return void(o[i]=r);i in o?o=o[i]:(o[i]={},o=o[i])}else e[t[0]]=r},deleteObjectValueByNames:function(e,t){var r=t.length;if(1!=r)for(var n=e,o=null,i=0;i<r;i++){if(o=t[i],i==r-1)return void delete n[o];n=n[o]}else delete e[t[0]]},treeFind:function(e,t,r,n,o){if("function"==typeof t)var i=t;else i=function(e){return e.id==t};var a=function e(t,r,n,o,a){for(var l=[],f=[],u=0;u<t.length;u++){var s=t[u];if(i(s)&&(l.push(s),!o))return l;if(s[n])if(a){var c=e(s[n],r,n,o,a);if(!o&&c.length>0)return c;l=l.concat(c)}else f.push(s[n])}if(!a)for(u=0;u<f.length;u++){if(c=e(f[u],r,n,o,a),!o&&c.length>0)return c;l=l.concat(c)}return l}(e,i,r,n,o);return n?a:a.length>0?a[0]:null},treeEach:function(e,t,r,n){var o=[],i=0,a=0;return t||(t=function(e){}),function e(t,r,n,l,f){f>a&&(a=f);var u=[];for(var s=0;s<t.length;s++){i++,void 0==o[f]?o[f]=1:o[f]++;var c=t[s];if(r(c,f,o[f],i,t,s))return;if(c[n])if(l){var p=e(c[n],r,n,l,f+1);if(p)return}else u.push(c[n])}if(!l)for(var s=0;s<u.length;s++){var p=e(u[s],r,n,l,f+1);if(p)return}return}(e,t,r,n,0),{struct:o,deep:a+1,total:i}},pathEach:function(e,t,r){if(r){var n="function"==typeof r,o=new WeakMap;o.set(e,!n||[])}!function e(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(var f in i){var u=i[f];if(r&&"object"===(void 0===u?"undefined":_typeof(u))){var s=[].concat(toConsumableArray(a),[f]);if(o.get(u)){n&&r(u,s,o.get(u));continue}n?o.set(u,s):o.set(u,!0)}var s=[].concat(toConsumableArray(a),[f]);t(u,s,l),"object"===(void 0===u?"undefined":_typeof(u))&&e(u,s,l+1)}}(e,[],0)}},StringSTR={left:function(e,t){return t>=0?e.substr(0,t):this.right(e,-t)},right:function(e,t){return t>=0?e.substr(e.length-t,t):this.left(e,-t)},insert:function(e,t,r,n){return e.slice(0,t)+n+e.slice(t+Math.abs(r))}},Rect={rltb2xywh:function(e){var t={x:null,y:null,w:null,h:null};return t.x=e.left,t.y=e.top,t.h=e.bottom-e.top,t.w=e.right-e.left,t},xywh2rltb:function(e){var t={left:null,right:null,top:null,bottom:null};return t.left=e.x,t.top=e.y,t.right=e.x+e.w,t.bottom=e.y+e.h,t},paddingXywh:function(e,t){var r=Rect.xywh2rltb(e);return t.length&&4==t.length?(r.left-=t[0],r.top-=t[1],r.right+=t[2],r.bottom+=t[3],Rect.rltb2xywh(r)):(r.left-=t,r.top-=t,r.right+=t,r.bottom+=t,Rect.rltb2xywh(r))},getXywhsRange:function(e){for(var t={left:null,right:null,top:null,bottom:null},r=0;r<e.length;r++){var n=Rect.xywh2rltb(e[r]);void 0==t.left&&(t.left=n.left),void 0==t.top&&(t.top=n.top),void 0==t.right&&(t.right=n.right),void 0==t.bottom&&(t.bottom=n.bottom),n.left<t.left&&(t.left=n.left),n.top<t.top&&(t.top=n.top),n.right>t.right&&(t.right=n.right),n.bottom>t.bottom&&(t.bottom=n.bottom)}return Rect.rltb2xywh(t)},moveXywhs:function(e,t){for(var r=Rect.getXywhsRange(e),n=0;n<e.length;n++){var o=e[n];o.x=t.x+o.x-r.x,o.y=t.y+o.y-r.y}return e},xywhHasCover:function(e,t){var r=Rect.xywh2rltb(e),n=Rect.xywh2rltb(t);return!!(r.left<=n.right&&r.right>=n.left&&r.top<=n.bottom&&r.bottom>=n.top)}},TypeTYP={getType:function(e){var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"};return null===e?"null":void 0===e?"undefined":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?t[t.toString.call(e)]||"object":void 0===e?"undefined":_typeof(e)}},AarryArr={symDifference:function(e,t){for(var r={},n=0;n<e.length;n++)r[e[n]]=!0;for(n=0;n<t.length;n++)void 0==r[t[n]]?r[t[n]]=!0:r[t[n]]=!1;var o=[];for(var i in r)0!=r[i]&&o.push(i);return o},symDifference_ObjectArray:function(e,t,r){for(var n={},o=0;o<e.length;o++)n[e[o][r]]={is:!0,ob:e[o]};for(o=0;o<t.length;o++)void 0==n[t[o][r]]?n[t[o][r]]={is:!0,ob:t[o]}:n[t[o][r]]={is:!1};var i=[];for(var a in n)0!=n[a].is&&i.push(n[a].ob);return i},difference:function(e,t){for(var r={},n=0;n<e.length;n++)r[e[n]]=!0;for(n=0;n<t.length;n++)void 0!=r[t[n]]&&(r[t[n]]=!1);var o=[];for(var i in r)0!=r[i]&&o.push(i);return o},union:function(e,t){for(var r={},n=0;n<e.length;n++)r[e[n]]=!0;for(n=0;n<t.length;n++)void 0==r[t[n]]&&(r[t[n]]=!0);var o=[];for(var i in r)0!=r[i]&&o.push(i);return o},intersection:function(e,t){for(var r={},n=0;n<e.length;n++)r[e[n]]=!1;for(n=0;n<t.length;n++)void 0!=r[t[n]]&&(r[t[n]]=!0);var o=[];for(var i in r)0!=r[i]&&o.push(i);return o},remove:function(e,t,r){if(r);else e=e.slice(0,e.length);for(var n=0;n<e.length;n++)t.constructor==Function?t(e[n])&&(e.splice(n,1),n--):e[n]==t&&(e.splice(n,1),n--);return e},hasMember:function(e,t,r){if(void 0==r){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}for(n=0;n<e.length;n++)if(r(e[n],t))return!0;return!1},getByKey:function(e,t,r,n){for(var o=0;o<e.length;o++)if(void 0!=e[o][t])if(void 0!=n){if(n(e[o][t],r))return e[o]}else if(e[o][t]==r)return e[o]},deleteByKey:function(e,t,r,n){for(var o=0;o<e.length;o++)void 0!=e[o][t]&&(void 0!=n?n(e[o][t],r)&&e.splice(o,1):e[o][t]==r&&e.splice(o,1))},sortObjectArray:function(e,t,r){if(void 0!=e&&void 0!=e.sort)return e.sort((n=t,function(e,t){var o,i;if("object"===(void 0===e?"undefined":_typeof(e))&&"object"===(void 0===t?"undefined":_typeof(t))&&e&&t)return o=e[n],i=t[n],o===i?0:(void 0===o?"undefined":_typeof(o))===(void 0===i?"undefined":_typeof(i))?r?o>i?-1:1:o<i?-1:1:(void 0===o?"undefined":_typeof(o))<(void 0===i?"undefined":_typeof(i))?-1:1;throw"error"}));var n}},Calc={},FileFIL={filterFileName:function(e,t){if(void 0!=e&&void 0!=e.length){return e=e.replace(/[\\/:*?"<>]/g,t||"")}return null}};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var utils=createCommonjsModule(function(e,t){var r=Object.prototype.hasOwnProperty,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},t.merge=function(e,n,o){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(o.plainObjects||o.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var i=e;return Array.isArray(e)&&!Array.isArray(n)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,i){r.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t.merge(e[i],n,o):e.push(n):e[i]=n}),e):Object.keys(n).reduce(function(e,i){var a=n[i];return r.call(e,i)?e[i]=t.merge(e[i],a,o):e[i]=a,e},i)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=t.charAt(o):i<128?r+=n[i]:i<2048?r+=n[192|i>>6]+n[128|63&i]:i<55296||i>=57344?r+=n[224|i>>12]+n[128|i>>6&63]+n[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),r+=n[240|i>>18]+n[128|i>>12&63]+n[128|i>>6&63]+n[128|63&i])}return r},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],i=o.obj[o.prop],a=Object.keys(i),l=0;l<a.length;++l){var f=a[l],u=i[f];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:i,prop:f}),r.push(u))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],o=0;o<t.length;++o)void 0!==t[o]&&n.push(t[o]);r.obj[r.prop]=n}}return t}(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}}),utils_1=utils.arrayToObject,utils_2=utils.merge,utils_3=utils.assign,utils_4=utils.decode,utils_5=utils.encode,utils_6=utils.compact,utils_7=utils.isRegExp,utils_8=utils.isBuffer,replace=String.prototype.replace,percentTwenties=/%20/g,formats={default:"RFC3986",formatters:{RFC1738:function(e){return replace.call(e,percentTwenties,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},arrayPrefixGenerators={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},toISO=Date.prototype.toISOString,defaults$1={delimiter:"&",encode:!0,encoder:utils.encode,encodeValuesOnly:!1,serializeDate:function(e){return toISO.call(e)},skipNulls:!1,strictNullHandling:!1},stringify$1=function e(t,r,n,o,i,a,l,f,u,s,c,p){var d=t;if("function"==typeof l)d=l(r,d);else if(d instanceof Date)d=s(d);else if(null===d){if(o)return a&&!p?a(r,defaults$1.encoder):r;d=""}if("string"==typeof d||"number"==typeof d||"boolean"==typeof d||utils.isBuffer(d))return a?[c(p?r:a(r,defaults$1.encoder))+"="+c(a(d,defaults$1.encoder))]:[c(r)+"="+c(String(d))];var h,y=[];if(void 0===d)return y;if(Array.isArray(l))h=l;else{var v=Object.keys(d);h=f?v.sort(f):v}for(var g=0;g<h.length;++g){var b=h[g];i&&null===d[b]||(y=Array.isArray(d)?y.concat(e(d[b],n(r,b),n,o,i,a,l,f,u,s,c,p)):y.concat(e(d[b],r+(u?"."+b:"["+b+"]"),n,o,i,a,l,f,u,s,c,p)))}return y},stringify_1=function(e,t){var r=e,n=t?utils.assign({},t):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var o=void 0===n.delimiter?defaults$1.delimiter:n.delimiter,i="boolean"==typeof n.strictNullHandling?n.strictNullHandling:defaults$1.strictNullHandling,a="boolean"==typeof n.skipNulls?n.skipNulls:defaults$1.skipNulls,l="boolean"==typeof n.encode?n.encode:defaults$1.encode,f="function"==typeof n.encoder?n.encoder:defaults$1.encoder,u="function"==typeof n.sort?n.sort:null,s=void 0!==n.allowDots&&n.allowDots,c="function"==typeof n.serializeDate?n.serializeDate:defaults$1.serializeDate,p="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:defaults$1.encodeValuesOnly;if(void 0===n.format)n.format=formats.default;else if(!Object.prototype.hasOwnProperty.call(formats.formatters,n.format))throw new TypeError("Unknown format option provided.");var d,h,y=formats.formatters[n.format];"function"==typeof n.filter?r=(h=n.filter)("",r):Array.isArray(n.filter)&&(d=h=n.filter);var v,g=[];if("object"!=typeof r||null===r)return"";v=n.arrayFormat in arrayPrefixGenerators?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var b=arrayPrefixGenerators[v];d||(d=Object.keys(r)),u&&d.sort(u);for(var m=0;m<d.length;++m){var x=d[m];a&&null===r[x]||(g=g.concat(stringify$1(r[x],x,b,i,a,l?f:null,h,u,s,c,y,p)))}var j=g.join(o),w=!0===n.addQueryPrefix?"?":"";return j.length>0?w+j:""},has$1=Object.prototype.hasOwnProperty,defaults$2={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:utils.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},parseValues=function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,i=n.split(t.delimiter,o),a=0;a<i.length;++a){var l,f,u=i[a],s=u.indexOf("]="),c=-1===s?u.indexOf("="):s+1;-1===c?(l=t.decoder(u,defaults$2.decoder),f=t.strictNullHandling?null:""):(l=t.decoder(u.slice(0,c),defaults$2.decoder),f=t.decoder(u.slice(c+1),defaults$2.decoder)),has$1.call(r,l)?r[l]=[].concat(r[l]).concat(f):r[l]=f}return r},parseObject=function(e,t,r){for(var n=t,o=e.length-1;o>=0;--o){var i,a=e[o];if("[]"===a)i=(i=[]).concat(n);else{i=r.plainObjects?Object.create(null):{};var l="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,f=parseInt(l,10);!isNaN(f)&&a!==l&&String(f)===l&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(i=[])[f]=n:i[l]=n}n=i}return n},parseKeys=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(n),a=i?n.slice(0,i.index):n,l=[];if(a){if(!r.plainObjects&&has$1.call(Object.prototype,a)&&!r.allowPrototypes)return;l.push(a)}for(var f=0;null!==(i=o.exec(n))&&f<r.depth;){if(f+=1,!r.plainObjects&&has$1.call(Object.prototype,i[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(i[1])}return i&&l.push("["+n.slice(i.index)+"]"),parseObject(l,t,r)}},parse$1=function(e,t){var r=t?utils.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||utils.isRegExp(r.delimiter)?r.delimiter:defaults$2.delimiter,r.depth="number"==typeof r.depth?r.depth:defaults$2.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:defaults$2.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:defaults$2.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:defaults$2.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:defaults$2.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:defaults$2.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:defaults$2.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:defaults$2.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?parseValues(e,r):e,o=r.plainObjects?Object.create(null):{},i=Object.keys(n),a=0;a<i.length;++a){var l=i[a],f=parseKeys(l,n[l],r);o=utils.merge(o,f,r)}return utils.compact(o)},lib={formats:formats,parse:parse$1,stringify:stringify_1},Url={removeQuery:function(e){return(e+="").replace(/\?.*$/,"")},getQuery:function(e,t){var r=/\?.*/.exec(e);if(r){var n=r[0];return t?lib.parse(n.slice(1)):n.slice(1)}},urlParse:function(){}},Cache={CacheObject:function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;classCallCheck(this,e),this.cacheOb={},this.keyList=[],this.keyListOffset=0,this.keyMap={},this.maxSize=t,this.blankSize=r,this.size=0}return createClass(e,[{key:"get",value:function(e){var t=this;if(void 0!==this.keyMap[e]){var r=this.keyMap[e]+this.keyListOffset;this.keyList[r]=void 0,this.keyList.push(e);var n=this.keyList.length-1;this.keyMap[e]=n-this.keyListOffset}return this.keyList.length>200&&setTimeout(function(){t.reMap()},0),this.cacheOb[e]}},{key:"set",value:function(e,t){this.size++,this.size>this.maxSize&&this.eliminate(),this.keyList.push(e);var r=this.keyList.length-1;return void 0!==this.keyMap[e]&&(this.keyList[this.keyMap[e]+this.keyListOffset]=void 0,this.size--),this.keyMap[e]=r-this.keyListOffset,this.cacheOb[e]=t}},{key:"eliminate",value:function(){for(var e=0,t=0;t<this.blankSize;e++){var r=this.keyList.shift();this.keyListOffset--,void 0!==r&&(delete this.cacheOb[r],delete this.keyMap[r],this.size--,t++)}}},{key:"reMap",value:function(){for(var e=[],t=0;t<this.keyList.length;t++){var r=this.keyList[t];void 0!==r&&e.push(r)}this.keyList=e,this.keyListOffset=0;for(t=0;t<this.keyList.length;t++){var n=this.keyList[t];this.keyMap[n]=t}}},{key:"clear",value:function(){this.cacheOb={},this.keyList=[],this.keyMap={},this.keyListOffset=0,this.size=0}}]),e}()},RichangNode={Object:ObjectOBJ,String:StringSTR,Type:TypeTYP,Array:AarryArr,Rect:Rect,Console:ConsoleCON,Tool:Tool,File:FileFIL,Calc:Calc,Url:Url,Cache:Cache,NodeFile:NodeFile,NodeDebug:NodeDebug,NodeTool:NodeTool,NodeImage:NodeImage};exports.Object=ObjectOBJ,exports.String=StringSTR,exports.Type=TypeTYP,exports.Array=AarryArr,exports.Rect=Rect,exports.Console=ConsoleCON,exports.Tool=Tool,exports.File=FileFIL,exports.Calc=Calc,exports.Url=Url,exports.Cache=Cache,exports.NodeFile=NodeFile,exports.NodeDebug=NodeDebug,exports.NodeTool=NodeTool,exports.NodeImage=NodeImage,exports.default=RichangNode;
