"use strict";var fs=require("fs"),FileFIL={filterFileName:function(e,t){if(void 0!=e&&void 0!=e.length){return e=e.replace(/[\\/:*?"<>]/g,t||"")}return null}},chalk=require("chalk"),NodeDebug={logRed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.red(e),t)},cRed:function(e){return chalk.red(e)},logBlue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.blue(e),t)},cBlue:function(e){return chalk.blue(e)},logGreen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.green(e),t)},cGreen:function(e){return chalk.green(e)},logGray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.gray(e),t)},cGray:function(e){return chalk.gray(e)},logYellow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.yellow(e),t)},cYellow:function(e){return chalk.yellow(e)},logLableRed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgRed(e),t)},logLableYellow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgYellow(e),t)},logLableCyan:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgCyan(e),t)},logLableGreen:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgGreen(e),t)},logLableWhite:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(chalk.black.bgWhite(e),t)}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},asyncToGenerator=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function o(n,i){try{var l=t[n](i),u=l.value}catch(e){return void r(e)}if(!l.done)return Promise.resolve(u).then(function(e){o("next",e)},function(e){o("throw",e)});e(u)}("next")})}},PNGJS=require("pngjs").PNG,fs$1=require("fs"),stream=require("stream"),streamToBuffer=require("stream-to-buffer"),NodeImage={getPngData:function(){var e=asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){if(stream.PassThrough){var o=new stream.PassThrough;o.end(t),o.pipe(new PNGJS({filterType:4})).on("parsed",function(){e(this.data)})}else new PNGJS({filterType:4}).parse(t,function(t,o){t&&r("err pngParseAsync:",t),e(o.data)})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ARGB_BufferToPngFileBuffer:function(e,t,r){return new Promise(function(o,n){for(var i=e.length,l=t||4,u=0;u<i;u+=l){var c=e[u];e[u]=e[u+1],e[u+1]=e[u+2],e[u+2]=e[u+3],e[u+3]=c}var f=new PNGJS({width:r.w,height:r.h});f.data=e,streamToBuffer(f.pack(),function(e,t){e&&n(e),o(t)})})}},nodeCrypto=require("crypto"),NodeTool={getMD5:function(e){var t=nodeCrypto.createHash("md5");return t.update(e),t.digest("hex")},getSHA256:function(e){var t=nodeCrypto.createHash("sha256");return t.update(e),t.digest("hex")},arrayBuffertoBuffer:function(e){for(var t=new Buffer(e.byteLength),r=new Uint8Array(e),o=0;o<t.length;++o)t[o]=r[o];return t}},ConsoleCON={CSS_POST:"background: rgb(44, 132, 226);border-radius: 2px 25px 25px 2px;padding: 2px 8px;color: rgba(255, 255, 255, 1);display: inline-block;min-width: 100px;",CSS_POST_RESULT:"background: rgb(51, 197, 138);border-radius: 25px 2px 2px 25px;padding: 2px 8px;color: rgba(255, 255, 255, 1);display: inline-block;min-width: 100px;"},ObjectOBJ={isEmptyObject:function(e){for(var t in e)return!1;return!0},objectCopyToObject:function(e,t,r,o,n,i){if(void 0!=t)for(var l in e){void 0!=i&&i(e,t,l);void 0!=r&&r(l,e[l]);var u=l;void 0!=o&&(u=o(l,e[l])),void 0!=e[l]&&e[l].constructor===Object?("object"!==_typeof(t[u])&&(t[u]={}),this.objectCopyToObject(e[l],t[u],r,o,n)):t[u]=void 0!=n?n(l,e[l]):e[l]}},getObjectValueByNames:function(e,t,r){for(var o,n=0;n<t.length-(r||0);n++)if(0==n){if(void 0==e[t[n]])return null;o=e[t[n]]}else{if(void 0==o[t[n]])return null;o=o[t[n]]}return o},setObjectValueByNames:function(e,t,r){var o;if(1!=t.length){for(var n=0;n<t.length;n++)if(0==n&&t.length>2)void 0==e[t[0]]&&(e[t[0]]={}),o=e[t[0]];else if(n<t.length-2&&t.length>2)void 0==o[t[n]]&&(o[t[n]]={}),o=o[t[n]];else if(n==t.length-2)return 2==t.length?(void 0==e[t[0]]&&(e[t[0]]={}),void((o=e[t[0]])[t[1]]=r)):(void 0==o[t[n]]&&(o[t[n]]={}),void((o=o[t[n]])[t[n+1]]=r))}else e[t[0]]=r}},StringSTR={left:function(e,t){return t>=0?e.substr(0,t):this.right(e,-t)},right:function(e,t){return t>=0?e.substr(e.length-t,t):this.left(e,-t)},insert:function(e,t,r,o){return e.slice(0,t)+o+e.slice(t+Math.abs(r))}},Rect={rltb2xywh:function(e){var t={x:null,y:null,w:null,h:null};return t.x=e.left,t.y=e.top,t.h=e.bottom-e.top,t.w=e.right-e.left,t},xywh2rltb:function(e){var t={left:null,right:null,top:null,bottom:null};return t.left=e.x,t.top=e.y,t.right=e.x+e.w,t.bottom=e.y+e.h,t},paddingXywh:function(e,t){var r=Rect.xywh2rltb(e);return t.length&&4==t.length?(r.left-=t[0],r.top-=t[1],r.right+=t[2],r.bottom+=t[3],Rect.rltb2xywh(r)):(r.left-=t,r.top-=t,r.right+=t,r.bottom+=t,Rect.rltb2xywh(r))},getXywhsRange:function(e){for(var t={left:null,right:null,top:null,bottom:null},r=0;r<e.length;r++){var o=Rect.xywh2rltb(e[r]);void 0==t.left&&(t.left=o.left),void 0==t.top&&(t.top=o.top),void 0==t.right&&(t.right=o.right),void 0==t.bottom&&(t.bottom=o.bottom),o.left<t.left&&(t.left=o.left),o.top<t.top&&(t.top=o.top),o.right>t.right&&(t.right=o.right),o.bottom>t.bottom&&(t.bottom=o.bottom)}return Rect.rltb2xywh(t)},moveXywhs:function(e,t){for(var r=Rect.getXywhsRange(e),o=0;o<e.length;o++){var n=e[o];n.x=t.x+n.x-r.x,n.y=t.y+n.y-r.y}return e},xywhHasCover:function(e,t){var r=Rect.xywh2rltb(e),o=Rect.xywh2rltb(t);return!!(r.left<=o.right&&r.right>=o.left&&r.top<=o.bottom&&r.bottom>=o.top)}},TypeTYP={getType:function(e){var t={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"};return null===e?"null":void 0===e?"undefined":"object"===(void 0===e?"undefined":_typeof(e))||"function"==typeof e?t[t.toString.call(e)]||"object":void 0===e?"undefined":_typeof(e)}},AarryArr={symDifference:function(e,t){for(var r={},o=0;o<e.length;o++)r[e[o]]=!0;for(o=0;o<t.length;o++)void 0==r[t[o]]?r[t[o]]=!0:r[t[o]]=!1;var n=[];for(var i in r)0!=r[i]&&n.push(i);return n},symDifference_ObjectArray:function(e,t,r){for(var o={},n=0;n<e.length;n++)o[e[n][r]]={is:!0,ob:e[n]};for(n=0;n<t.length;n++)void 0==o[t[n][r]]?o[t[n][r]]={is:!0,ob:t[n]}:o[t[n][r]]={is:!1};var i=[];for(var l in o)0!=o[l].is&&i.push(o[l].ob);return i},difference:function(e,t){for(var r={},o=0;o<e.length;o++)r[e[o]]=!0;for(o=0;o<t.length;o++)void 0!=r[t[o]]&&(r[t[o]]=!1);var n=[];for(var i in r)0!=r[i]&&n.push(i);return n},union:function(e,t){for(var r={},o=0;o<e.length;o++)r[e[o]]=!0;for(o=0;o<t.length;o++)void 0==r[t[o]]&&(r[t[o]]=!0);var n=[];for(var i in r)0!=r[i]&&n.push(i);return n},intersection:function(e,t){for(var r={},o=0;o<e.length;o++)r[e[o]]=!1;for(o=0;o<t.length;o++)void 0!=r[t[o]]&&(r[t[o]]=!0);var n=[];for(var i in r)0!=r[i]&&n.push(i);return n},remove:function(e,t,r){if(r);else e=e.slice(0,e.length);for(var o=0;o<e.length;o++)t.constructor==Function?t(e[o])&&(e.splice(o,1),o--):e[o]==t&&(e.splice(o,1),o--);return e},hasMember:function(e,t,r){if(void 0==r){for(var o=0;o<e.length;o++)if(e[o]==t)return!0;return!1}for(o=0;o<e.length;o++)if(r(e[o],t))return!0;return!1},getByKey:function(e,t,r,o){for(var n=0;n<e.length;n++)if(void 0!=e[n][t])if(void 0!=o){if(o(e[n][t],r))return e[n]}else if(e[n][t]==r)return e[n]},deleteByKey:function(e,t,r,o){for(var n=0;n<e.length;n++)void 0!=e[n][t]&&(void 0!=o?o(e[n][t],r)&&e.splice(n,1):e[n][t]==r&&e.splice(n,1))},sortObjectArray:function(e,t,r){if(void 0!=e&&void 0!=e.sort)return e.sort((o=t,function(e,t){var n,i;if("object"===(void 0===e?"undefined":_typeof(e))&&"object"===(void 0===t?"undefined":_typeof(t))&&e&&t)return n=e[o],i=t[o],n===i?0:(void 0===n?"undefined":_typeof(n))===(void 0===i?"undefined":_typeof(i))?r?n>i?-1:1:n<i?-1:1:(void 0===n?"undefined":_typeof(n))<(void 0===i?"undefined":_typeof(i))?-1:1;throw"error"}));var o}},uuidv4=require("uuid/v4"),uuidv5=require("uuid/v5"),isUUID=require("is-uuid"),sha1=require("uuid/lib/sha1-browser.js"),Tool={genUUID_v4:function(){return uuidv4()},genUUID_v5:function(e){if(36!==(t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"f8061fba-842b-4cc5-9872-9348e2e06916").length)var t=uuidv5(t,"f8061fba-842b-4cc5-9872-9348e2e06916");return uuidv5(e,t)},genSHA1:function(e){return t=sha1(e),Array.from(t,function(e){return("0"+(255&e).toString(16)).slice(-2)}).join("");var t},formatUUID:function(e){var t="";return t+=(e=e.toLowerCase()).slice(0,8)+"-",t+=e.slice(8,12)+"-",t+=e.slice(12,16)+"-",t+=e.slice(16,20)+"-",t+=e.slice(20,36)},checkUUID:function(e){for(var t=[isUUID.v4,isUUID.v5,isUUID.v3,isUUID.v2,isUUID.v1],r=[4,5,3,2,1],o=0;o<t.length;o++)if(t[o](e))return r[o];return 0},roll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(Math.random()*(e-t+1)+t)},rollString:function(e,t){for(var r="",o=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)r+=o.charAt(Math.floor(Math.random()*o.length));return r}},Calc={},RichangNode={Object:ObjectOBJ,String:StringSTR,Type:TypeTYP,Array:AarryArr,Rect:Rect,Console:ConsoleCON,Tool:Tool,Calc:Calc,NodeFile:FileFIL,NodeDebug:NodeDebug,NodeTool:NodeTool,NodeImage:NodeImage};module.exports=RichangNode;
